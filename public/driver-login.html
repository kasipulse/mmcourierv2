<div class="panel">
  <h1>Driver Login</h1>
  <p>Add or manage drivers</p>
  <input type="text" id="driverName" placeholder="Driver Name" />
  <button onclick="addDriver()">Add Driver</button>
  <ul id="driverList"></ul>
</div>

<script>
function initPanel() {
  async function loadDrivers() {
    const { data } = await supabase.from('drivers').select('*');
    const ul = document.getElementById('driverList');
    ul.innerHTML='';
    data.forEach(d=>{ 
      const li=document.createElement('li'); 
      li.textContent=d.name; ul.appendChild(li);
    });
  }
  async function addDriver() {
    const name=document.getElementById('driverName').value.trim();
    if(!name) return alert('Enter driver name');
    await supabase.from('drivers').insert([{name}]);
    document.getElementById('driverName').value='';
    loadDrivers();
  }
  window.addDriver=addDriver;
  loadDrivers();
}
</script>
