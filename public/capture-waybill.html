<div class="panel">
  <h2>Capture Waybill</h2>
  <p>Manually capture and register a new waybill record.</p>
  <form id="waybillForm" onsubmit="return saveWaybill(event)">
    <table style="width:100%; border-spacing:8px;">
      <tr><td><b>Waybill Number:</b></td><td><input type="text" id="waybill_no" required style="width:100%;"></td></tr>
      <tr><td><b>Service:</b></td>
        <td>
          <select id="service" style="width:100%;">
            <option value="NDX">NDX (Next Day)</option>
            <option value="SDX">SDX (Same Day)</option>
            <option value="ECO">ECO (Economy)</option>
          </select>
        </td>
      </tr>
      <tr><td><b>Customer:</b></td><td><input type="text" id="customer" placeholder="e.g. FedEx" style="width:100%;"></td></tr>
      <tr><td><b>Consignee Name:</b></td><td><input type="text" id="consignee_name" style="width:100%;"></td></tr>
      <tr><td><b>Consignee Address:</b></td><td><input type="text" id="consignee_address" style="width:100%;"></td></tr>
      <tr><td><b>Consignee Phone:</b></td><td><input type="text" id="consignee_phone" style="width:100%;"></td></tr>
      <tr><td><b>Region:</b></td>
        <td>
          <select id="region" style="width:100%;">
            <option value="JHB">JHB</option>
            <option value="PRY">PRY</option>
            <option value="DBN">DBN</option>
            <option value="CPT">CPT</option>
          </select>
        </td>
      </tr>
      <tr><td><b>Sender Name:</b></td><td><input type="text" id="sender_name" style="width:100%;"></td></tr>
      <tr><td><b>Sender Address:</b></td><td><input type="text" id="sender_address" style="width:100%;"></td></tr>
      <tr><td><b>Item Description:</b></td><td><input type="text" id="item_desc" style="width:100%;"></td></tr>
      <tr><td><b>Dimensions (L x W x H):</b></td>
        <td>
          <input type="number" id="length" placeholder="L" style="width:30%;"> ×
          <input type="number" id="width" placeholder="W" style="width:30%;"> ×
          <input type="number" id="height" placeholder="H" style="width:30%;">
        </td>
      </tr>
      <tr><td><b>Weight (kg):</b></td><td><input type="number" id="weight" step="0.1" style="width:100%;"></td></tr>
    </table>
    <br>
    <button type="submit" class="menu-btn">Save Waybill</button>
  </form>

  <div id="waybillStatus" style="margin-top:10px; font-weight:bold;"></div>
</div>

<script>
  async function saveWaybill(event) {
    event.preventDefault();

    const waybillData = {
      waybill_no: document.getElementById('waybill_no').value,
      service: document.getElementById('service').value,
      customer: document.getElementById('customer').value,
      consignee_name: document.getElementById('consignee_name').value,
      consignee_address: document.getElementById('consignee_address').value,
      consignee_phone: document.getElementById('consignee_phone').value,
      region: document.getElementById('region').value,
      sender_name: document.getElementById('sender_name').value,
      sender_address: document.getElementById('sender_address').value,
      item_desc: document.getElementById('item_desc').value,
      dimensions: `${document.getElementById('length').value}x${document.getElementById('width').value}x${document.getElementById('height').value}`,
      weight: document.getElementById('weight').value
    };

    // Placeholder — link to your backend later
    console.log("Saving waybill:", waybillData);

    document.getElementById('waybillStatus').textContent = 
      `✅ Waybill ${waybillData.waybill_no} captured successfully.`;
  }
</script>
